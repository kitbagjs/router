name: Auto Generate Docs

on:
  schedule:
    # Run every Monday at 9:00 AM UTC
    - cron: '0 9 * * 1'
  workflow_dispatch: # Allow manual trigger

jobs:
  generate-docs:
    name: Generate Documentation
    runs-on: ubuntu-latest

    steps:
      - name: Setup
        id: setup
        uses: kitbagjs/actions-setup-project@main

      - name: Generate docs
        run: npm run docs:generate

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
          commit-message: 'docs: auto-generate documentation'
          title: 'docs: Auto-generate documentation'
          body: |
            This PR was automatically generated by the weekly docs generation workflow.

            The documentation has been regenerated using `npm run docs:generate`.

            Please review the changes and merge if everything looks correct.
          branch: auto-docs/update
          delete-branch: true
          labels: |
            documentation
            automated