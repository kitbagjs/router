name: Auto Generate Docs

on:
  push:
    tags:
      - 'v*' # Trigger on version tags (v0.20.11, v1.0.0, etc.)
  workflow_dispatch: # Allow manual trigger

jobs:
  generate-docs:
    name: Generate Documentation
    runs-on: ubuntu-latest

    steps:
      - name: Setup
        id: setup
        uses: kitbagjs/actions-setup-project@main

      - name: Generate docs
        run: npm run docs:generate

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
          commit-message: 'docs: auto-generate documentation'
          title: 'docs: Auto-generate documentation'
          body: |
            This PR was automatically generated after a new release tag was created.

            The documentation has been regenerated using `npm run docs:generate`.

            Please review the changes and merge if everything looks correct.
          branch: auto-docs/update
          delete-branch: true
          labels: |
            documentation
            automated